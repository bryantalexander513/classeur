<div class="explorer background panel">
    <div class="explorer container panel">
        <div class="header">
            <div layout="row" layout-align="space-between end">
                <md-button class="classeur selector" ng-click="explorerLayoutSvc.toggleExplorer()">
                    <div layout="row" layout-align="start end">
                        <div class="logo no-overflow">
                            <img src="images/logo.png" height="60">
                        </div>
                        <div class="no-overflow" flex>
                            {{explorerLayoutSvc.currentClasseurDao.name}}
                        </div>
                        <div class="toggle icon">
                            <span class="mdi-hardware-keyboard-arrow-down"></span>
                        </div>
                    </div>
                </md-button>
                <div class="links" flex>
                    <md-button md-no-ink class="md-primary" ng-click="setDocFile('markdownCheatSheet')">
                        <span class="mdi-action-help"></span> Help
                    </md-button>
                    <md-button md-no-ink class="md-primary" ng-click="setDocFile('markdownCheatSheet')">
                        <span class="mdi-action-help"></span> Markdown Cheat Sheet
                    </md-button>
                </div>
            </div>
            <div layout="row" layout-align="end start">
                <div ng-if="!socketSvc.hasToken">
                    <md-button ng-click="signin()">
                        Sign in with Google <span class="mdi-navigation-arrow-forward"></span>
                    </md-button>
                </div>
                <div ng-if="userSvc.user">
                    <span class="username">Hi <b>{{userSvc.user.name}}</b></span>
                    </span>
                    <md-button>
                        Go premium <span class="mdi-navigation-arrow-forward"></span>
                    </md-button>
                </div>
            </div>
        </div>
        <div class="classeur list panel no-overflow">
            <div class="scroller panel">
                <div class="tile container" ng-repeat="classeur in classeurSvc.classeurs">
                    <cl-classeur-entry></cl-classeur-entry>
                </div>
                <div class="tile container">
                    <div class="new tile content panel md-whiteframe-z1" ng-class="'plastic-' + ((classeurSvc.classeurs.length) % 4)">
                        <div class="tab-1" ng-class="'plastic-' + ((classeurSvc.classeurs.length + 1) % 4)"></div>
                        <div class="tab-2" ng-class="'plastic-' + ((classeurSvc.classeurs.length + 2) % 4)"></div>
                        <div class="footer panel" layout="row" layout-align="center">
                            <cl-button class="btn">
                                <a class="mdi-content-add" ng-click="createClasseur()" aria-label="Create classeur" title="Create classeur"></a>
                            </cl-button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="explorer content panel md-whiteframe-z2" ng-class="plasticClass">

            <div class="hole panel background first"></div>
            <div class="hole panel background second"></div>

            <div class="folder scroller panel">

                <div class="folder container" ng-switch="!!explorerLayoutSvc.currentFolderDao">

                    <div class="nav" layout="row" ng-switch-when="true" layout-align="center center">
                        <md-input-container md-theme="classeur" flex>
                            <input ng-model="explorerLayoutSvc.currentFolderDao.name" class="folder name" ng-disabled="explorerLayoutSvc.currentFolderDao === explorerLayoutSvc.unclassifiedFolder" ng-blur="folderNameModified()">
                        </md-input-container>

                        <div ng-if="explorerLayoutSvc.currentFolderDao !== explorerLayoutSvc.unclassifiedFolder" layout="row">
                            <md-button class="delete folder btn" md-no-ink>
                                <a class="mdi-action-delete" ng-click="deleteConfirm(true)" title="Delete folder" aria-label="Delete folder"></a>
                            </md-button>
                            <md-button ng-if="socketSvc.hasToken" class="share folder btn" md-no-ink>
                                <a class="mdi-social-share" ng-class="{red: explorerLayoutSvc.currentFolderDao.effectiveSharing === 'rw', blue: explorerLayoutSvc.currentFolderDao.effectiveSharing === 'r'}" ng-click="explorerLayoutSvc.sharingDialogFolderDao = explorerLayoutSvc.currentFolderDao" aria-label="Share folder" title="Share folder"></a>
                            </md-button>
                        </div>
                    </div>

                    <div class="nav" layout="row" layout-align="center center" ng-switch-when="false">
                        <md-input-container md-theme="classeur" flex>
                            <input class="folder name" value="Available offline" disabled>
                        </md-input-container>
                    </div>

                    <div class="new-file actions" layout="row" layout-align="end">
                        <md-button ng-click="createFile()">
                            <span class="mdi-content-add"></span> New file
                        </md-button>
                        <md-button>
                            <span class="mdi-content-add"></span> Import
                        </md-button>
                    </div>

                    <div class="folder content" ng-if="explorerLayoutSvc.files.length">

                        <div class="file actions" ng-switch="hasSelection()">
                            <div ng-switch-when="false">
                                <md-button md-no-ink class="md-primary" ng-click="selectAll()">
                                    <span class="mdi-navigation-check"></span> Select all
                                </md-button>
                            </div>
                            <div ng-switch-when="true">
                                <md-button md-no-ink class="md-primary" ng-click="selectNone()">
                                    <span class="mdi-toggle-check-box-outline-blank"></span> Select None
                                </md-button>
                            </div>
                            <div ng-switch-when="true">
                                <md-button md-no-ink class="md-primary" ng-click="deleteConfirm()">
                                    <span class="mdi-action-delete"></span> Delete
                                </md-button>
                            </div>
                        </div>

                        <div ng-repeat="fileDao in explorerLayoutSvc.files" ng-switch="!fileDao.userId">
                            <cl-file-entry cl-file-dragging-src ng-switch-when="true"></cl-file-entry>
                            <cl-public-file-entry ng-switch-when="false"></cl-public-file-entry>
                        </div>

                        <cl-recent-alert ng-if="!explorerLayoutSvc.currentFolderDao"></cl-recent-alert>

                    </div>

                </div>
            </div>

            <div class="btn-grp panel background no-overflow">
                <div class="container panel">
                    <div cl-folder-button cl-file-dragging-target class="folder btn btn-panel" ng-repeat="folderDao in explorerLayoutSvc.folders" ng-class="'plastic-' + (($index + 1) % 4)">
                        <md-button ng-click="setFolder(folderDao)" aria-label="{{folder.name}}">
                            <div class="rotate-90" ng-if="folderDao !== explorerLayoutSvc.createFolder">
                                {{folderDao.name}}
                            </div>
                            <div class="mdi-content-add" ng-if="folderDao === explorerLayoutSvc.createFolder"></div>
                        </md-button>
                    </div>
                </div>
                <div cl-folder-button class="recent btn btn-panel plastic" ng-class="{open: !explorerLayoutSvc.currentFolderDao}">
                    <md-button ng-click="setFolder()" aria-label="Recent">
                        <div class="rotate-90">Recent</div>
                    </md-button>
                </div>
                <div class="shadow panel md-whiteframe-z2"></div>
            </div>
        </div>
    </div>

    <cl-file-dragging></cl-file-dragging>

    <cl-footer></cl-footer>
</div>

<cl-sharing-dialog></cl-sharing-dialog>
